<main>

    <section>
        <h2 class="lol" style="color: rgb(37, 29, 87); margin-left: 40px; text-decoration: underline;">Liste de livres</h2>

        <button type="button" (click)="isModalOpen = !isModalOpen" style="margin-top: 20px; margin-left: 35px;">
            {{ !isModalOpen ? 'Ouvrir le formulaire' : 'Fermer le formulaire' }}
        </button>

        <ul>
            @for (book of books; track book.id) {
                <li>
                    <div [ngStyle]="{
                        color: book.is_read ? 'purple' : 'black',
                    }">
                        <p>
                            {{book.title}}, {{book.author}}, {{book.publication_year}} 
                        </p>
                        <p>
                            {{book.genre}} 
                        </p>
                    </div>
                    <div>
                        <button type="button" (click)="markAsRead(book)">
                            Marquer le livre comme lu
                        </button>
                        <button type="button" (click)="deleteBook(book)">
                            Supprimer le livre
                        </button>
                        <div>
                            <button type="button" (click)="onBookClick(book)">{{ !isModalOpen ? 'Envoyer au formulaire' : 'Fermer le formulaire' }}</button>
                        </div>
                    </div>
                </li>
            }
        </ul>
    </section>
    <section>
        <div id="myModal" class="modal" [style.display]="isModalOpen ? 'block' : 'none'" style="border-radius: 10px;">
            <div class="modal-content" style="border-radius: 10px;">
                <form [formGroup]="addBookForm" (ngSubmit)="onSubmit()" style="text-align: center; margin: auto; background-color: rgb(134, 218, 214); padding: 20px; border-radius: 10px; border: 10px solid rgb(115, 175, 213);">
                    <h2 class="lol" style="color: rgb(255, 255, 255); margin-bottom: 20px; text-decoration: underline;">{{ !isAdded ? 'Ajouter un livre' : 'Modifier le livre' }}</h2>
                    <label for="title">Titre:&nbsp;</label>
                    <input type="text" id="title" formControlName="title" required style="background-color: rgb(255, 255, 255); border-radius: 4px; color: rgb(115, 175, 213);"/>

                    <br>

                    <label for="author">Auteur:&nbsp;</label>
                    <input type="text" id="author" formControlName="author" required style="background-color: rgb(255, 255, 255); border-radius: 4px; color: rgb(115, 175, 213);"/>

                    <br>

                    <label for="publication_year">Ann√©e publication:&nbsp;</label>
                    <input type="number" id="publication_year" formControlName="publication_year" required style="background-color: rgb(255, 255, 255); border-radius: 4px; color: rgb(115, 175, 213);"/>

                    <br>

                    <label for="genre">Genre:&nbsp;</label>
                    <input type="text" id="genre" formControlName="genre" required style="background-color: rgb(255, 255, 255); border-radius: 4px; color: rgb(115, 175, 213);"/>

                    <br>

                    <label for="main_characters">Acteurs:&nbsp;</label>
                    <input type="text" id="main_characters" formControlName="main_characters" required style="background-color: rgb(255, 255, 255); border-radius: 4px; color: rgb(115, 175, 213);"/>

                    <br>

                    <label for="summary">Synopsis:&nbsp;</label>
                    <input type="text" id="summary" formControlName="summary" required style="background-color: rgb(255, 255, 255); border-radius: 4px; color: rgb(115, 175, 213);"/>
                    <input type="hidden" formControlName="id" />
        
                    <button type="submit" style="margin-top: 20px;">{{ !isAdded ? 'Ajouter' : 'Modifier' }}</button>            
                    <button type="button" (click)="isModalOpen = !isModalOpen" style="margin-top: 20px;">
                        {{ !isModalOpen ? 'Ouvrir le formulaire' : 'Fermer le formulaire' }}
                    </button>
                </form>    
            </div>
        </div>                
    </section>
</main>

